{% extends "base.html" %}
{% load i18n bootstrap4 user svg %}
{% block body %}
    <h4 class="card-title"><span>{% svg "icons/users" %} <a href="{% url "orgunit-detail" orgunit.slug %}">{{ orgunit.name }}</a></span></h4>
{% if user|has_admin_group:orgunit.admin_group %}
    {% bootstrap_form user_search %}
    <div class="p-2">
        <button class="btn btn-primary" onclick="add_user('{{ orgunit.slug }}', 'member');">{% trans "Add member" %}</button>
        <button class="btn btn-primary" onclick="add_user('{{ orgunit.slug }}', 'admin');">{% trans "Add admin" %}</button>
    </div>
    <ul class="list-group" id="user_list">
    {% for user in users_sorted %}
        <li class="list-group-item justify-content-between"><span>
            {% if user|has_group:orgunit.admin_group %}
                {% svg "icons/star" %}
            {% else %}
                {% svg "icons/user" %}
            {% endif %}
            <a href="{% url "user-detail" user.uuid %}"> {{ user.get_full_name }}</a> - <a href="mailto:{{ user.email }}">{{ user.email }}</a>
            {% if user|has_group:orgunit.admin_group %}
                ({% trans "Admin" %})
            {% endif %}
        </span><span>
            <button  class="btn btn-outline-primary btn-block p-1" id="user_remove_{{ user.uuid }}"
                     onclick="remove_user('{{ user.uuid }}', '{{ orgunit.slug }}');">{%  trans "Remove" %}</button>
        </span></li>
    {% empty %}
        {% trans "No members" %}
    {% endfor %}
    </ul>
{% else %}
    {% trans "You have no right to edit this organisation" %}
{% endif %}
{% endblock %}